{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ASUS\\\\Desktop\\\\rimontada\\\\frontend\\\\src\\\\pages\\\\DashboardPsychologist.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport io from 'socket.io-client';\nimport TopBar from '../components/TopBar';\nimport AiAssistant from '../components/AiAssistant';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst WORKFLOW_STEPS = [{\n  key: 'ficheInitiale',\n  label: '1. Fiche initiale de signalement'\n}, {\n  key: 'rapportDPE',\n  label: '2. Rapport DPE (Notif. Direction)'\n}, {\n  key: 'evaluationComplete',\n  label: '3. √âvaluation compl√®te'\n}, {\n  key: 'planAction',\n  label: \"4. Plan d'action\"\n}, {\n  key: 'rapportSuivi',\n  label: '5. Rapport de suivi'\n}, {\n  key: 'rapportFinal',\n  label: '6. Rapport final'\n}, {\n  key: 'avisCloture',\n  label: '7. Avis de cl√¥ture'\n}];\nconst DashboardPsychologist = () => {\n  _s();\n  const [reports, setReports] = useState([]);\n  const [selectedReport, setSelectedReport] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [notes, setNotes] = useState('');\n  const [activeTab, setActiveTab] = useState('details');\n  const [timeLeft, setTimeLeft] = useState(null);\n  useEffect(() => {\n    fetchReports();\n    const socket = io();\n    socket.on('new-report', data => {\n      alert(`üîî Nouveau signalement: ${data.childName} (${data.urgency})`);\n      fetchReports();\n    });\n    return () => socket.disconnect();\n  }, []);\n\n  // Timer effect for Sauvegarde deadline\n  useEffect(() => {\n    if (selectedReport !== null && selectedReport !== void 0 && selectedReport.deadline && selectedReport.status === 'en_cours') {\n      const interval = setInterval(() => {\n        const now = new Date();\n        const end = new Date(selectedReport.deadline);\n        const diff = end - now;\n        if (diff <= 0) {\n          setTimeLeft('EXPIRED');\n          clearInterval(interval);\n        } else {\n          const hours = Math.floor(diff / (1000 * 60 * 60));\n          const minutes = Math.floor(diff % (1000 * 60 * 60) / (1000 * 60));\n          setTimeLeft(`${hours}h ${minutes}m restants`);\n        }\n      }, 60000); // Update every minute\n\n      // Initial set\n      const now = new Date();\n      const end = new Date(selectedReport.deadline);\n      const diff = end - now;\n      if (diff <= 0) setTimeLeft('EXPIRED');else {\n        const hours = Math.floor(diff / (1000 * 60 * 60));\n        const minutes = Math.floor(diff % (1000 * 60 * 60) / (1000 * 60));\n        setTimeLeft(`${hours}h ${minutes}m restants`);\n      }\n      return () => clearInterval(interval);\n    } else {\n      setTimeLeft(null);\n    }\n  }, [selectedReport]);\n  const fetchReports = async () => {\n    try {\n      const response = await axios.get('/api/reports/prioritized');\n      setReports(response.data);\n    } catch (error) {\n      console.error('Failed to fetch reports');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleClassify = async (id, classification) => {\n    try {\n      await axios.put(`/api/reports/${id}/classify`, {\n        classification\n      });\n      fetchReports();\n      const updated = await axios.get('/api/reports/prioritized'); // Refresh\n      setSelectedReport(updated.data.find(r => r._id === id));\n    } catch (error) {\n      alert('‚ùå √âchec');\n    }\n  };\n  const handleWorkflowStep = async (id, step) => {\n    // Determine current step index\n    const stepIdx = WORKFLOW_STEPS.findIndex(s => s.key === step);\n\n    // Check previous step\n    if (stepIdx > 0) {\n      const prevKey = WORKFLOW_STEPS[stepIdx - 1].key;\n      if (!selectedReport.workflow[prevKey].completed) {\n        alert(`‚õî Vous devez d'abord compl√©ter l'√©tape : ${WORKFLOW_STEPS[stepIdx - 1].label}`);\n        return;\n      }\n    }\n    try {\n      // Ideally we'd upload a file here too\n      await axios.put(`/api/reports/${id}/workflow/${step}`);\n      const res = await axios.get('/api/reports/prioritized');\n      setReports(res.data);\n      setSelectedReport(res.data.find(r => r._id === id));\n    } catch (error) {\n      var _error$response, _error$response$data;\n      alert('‚ùå √âchec: ' + (((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || 'Erreur'));\n    }\n  };\n  const handleSaveNotes = async id => {\n    try {\n      await axios.put(`/api/reports/${id}/notes`, {\n        notes\n      });\n      alert('üíæ Notes sauvegard√©es');\n    } catch (error) {\n      alert('‚ùå √âchec');\n    }\n  };\n  const getUrgencyBadge = u => {\n    const map = {\n      critical: 'badge-danger',\n      high: 'badge-warning',\n      medium: 'badge-info',\n      low: 'badge-success'\n    };\n    return /*#__PURE__*/_jsxDEV(\"span\", {\n      className: `badge ${map[u] || 'badge-neutral'}`,\n      children: u\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 12\n    }, this);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"app-layout\",\n    children: [/*#__PURE__*/_jsxDEV(TopBar, {\n      role: \"psychologist\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"page-content\",\n      style: {\n        display: 'grid',\n        gridTemplateColumns: 'minmax(300px, 350px) 1fr',\n        gap: '2rem',\n        height: 'calc(100vh - 100px)'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card\",\n        style: {\n          display: 'flex',\n          flexDirection: 'column',\n          height: '100%',\n          padding: '1rem'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-header\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"File d'attente\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 130,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"subtitle\",\n              children: [reports.length, \" dossiers priotitaires\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 131,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            overflowY: 'auto',\n            flex: 1,\n            paddingRight: '0.5rem'\n          },\n          children: loading ? /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Chargement...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 24\n          }, this) : reports.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"empty-state\",\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Aucun dossier en attente\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 136,\n              columnNumber: 44\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 15\n          }, this) : reports.map(r => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `queue-item ${(selectedReport === null || selectedReport === void 0 ? void 0 : selectedReport._id) === r._id ? 'active' : ''}`,\n            onClick: () => {\n              setSelectedReport(r);\n              setNotes(r.confidentialNotes || '');\n              setActiveTab('details');\n            },\n            style: {\n              borderLeft: `4px solid ${r.urgency === 'critical' ? 'var(--danger)' : r.urgency === 'high' ? 'var(--warning)' : 'var(--success)'}`\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: 'flex',\n                justifyContent: 'space-between',\n                marginBottom: '0.25rem'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                style: {\n                  fontWeight: 600\n                },\n                children: [r.childFirstName, \" \", r.childLastName]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 145,\n                columnNumber: 21\n              }, this), getUrgencyBadge(r.urgency)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 144,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: '0.8rem',\n                color: 'var(--text-muted)'\n              },\n              children: [r.program, \" \\u2022 \", new Date(r.createdAt).toLocaleDateString('fr-FR')]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 148,\n              columnNumber: 19\n            }, this)]\n          }, r._id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card\",\n        style: {\n          height: '100%',\n          overflowY: 'auto'\n        },\n        children: selectedReport ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"animate-in\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-header\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                style: {\n                  fontSize: '1.5rem',\n                  marginBottom: '0.25rem'\n                },\n                children: [selectedReport.childFirstName, \" \", selectedReport.childLastName]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 163,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"subtitle\",\n                children: [\"ID: \", selectedReport._id, \" \\u2022 \", selectedReport.program, \" \\u2022 \", selectedReport.village]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 164,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 162,\n              columnNumber: 17\n            }, this), timeLeft && /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                background: timeLeft === 'EXPIRED' ? 'var(--danger)' : 'var(--warning)',\n                color: 'white',\n                padding: '0.5rem 1rem',\n                borderRadius: '20px',\n                fontWeight: 700\n              },\n              children: [\"\\u23F1\\uFE0F Deadline: \", timeLeft]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 168,\n              columnNumber: 19\n            }, this), selectedReport.pdfPath && /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn-secondary\",\n              onClick: () => window.open(`/uploads/${selectedReport.pdfPath.split(/[\\\\/]/).pop()}`, '_blank'),\n              children: \"\\uD83D\\uDCC4 Voir Rapport IA\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 176,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"tabs\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: `tab ${activeTab === 'details' ? 'active' : ''}`,\n              onClick: () => setActiveTab('details'),\n              children: \"D\\xE9tails & Classification\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 183,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: `tab ${activeTab === 'workflow' ? 'active' : ''}`,\n              onClick: () => setActiveTab('workflow'),\n              children: \"Proc\\xE9dure (7 \\xE9tapes)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 184,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: `tab ${activeTab === 'notes' ? 'active' : ''}`,\n              onClick: () => setActiveTab('notes'),\n              children: \"Notes Confidentielles\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 185,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 182,\n            columnNumber: 15\n          }, this), activeTab === 'details' && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"animate-in\",\n            style: {\n              display: 'grid',\n              gridTemplateColumns: '2fr 1fr',\n              gap: '2rem'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  background: 'var(--primary-50)',\n                  padding: '1.5rem',\n                  borderRadius: 'var(--radius)',\n                  marginBottom: '2rem'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"Description de l'incident\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 193,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  style: {\n                    fontStyle: 'italic',\n                    fontSize: '1.05rem',\n                    color: 'var(--primary-dark)'\n                  },\n                  children: [\"\\\"\", selectedReport.incidentDescription, \"\\\"\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 194,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 192,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  display: 'grid',\n                  gridTemplateColumns: 'repeat(2, 1fr)',\n                  gap: '1.5rem',\n                  marginBottom: '2rem'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    children: \"Type d'incident\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 199,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      fontWeight: 600\n                    },\n                    children: selectedReport.incidentType\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 200,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 198,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    children: \"Abuseur pr\\xE9sum\\xE9\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 203,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      fontWeight: 600\n                    },\n                    children: [selectedReport.abuserFirstName, \" \", selectedReport.abuserLastName]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 204,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 202,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    children: \"Signalement Anonyme\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 207,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      fontWeight: 600\n                    },\n                    children: selectedReport.anonymous ? 'Oui' : 'Non'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 208,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 206,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 197,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"section-title\",\n                children: \"Action requise\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 212,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  display: 'flex',\n                  gap: '1rem',\n                  marginTop: '1rem'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn-success btn-lg\",\n                  style: {\n                    flex: 1\n                  },\n                  onClick: () => handleClassify(selectedReport._id, 'sauvegarde'),\n                  children: \"\\u2705 Sauvegarde\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 214,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn-primary btn-lg\",\n                  style: {\n                    flex: 1\n                  },\n                  onClick: () => handleClassify(selectedReport._id, 'prise_en_charge'),\n                  children: \"\\uD83D\\uDEE1\\uFE0F Prise en charge\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 217,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn-danger btn-lg\",\n                  style: {\n                    flex: 1\n                  },\n                  onClick: () => handleClassify(selectedReport._id, 'faux'),\n                  children: \"\\uD83D\\uDDD1\\uFE0F Faux signalement\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 220,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 213,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 191,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                minWidth: '300px'\n              },\n              children: /*#__PURE__*/_jsxDEV(AiAssistant, {\n                reportId: selectedReport._id,\n                description: selectedReport.incidentDescription,\n                incidentType: selectedReport.incidentType\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 228,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 227,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 17\n          }, this), activeTab === 'workflow' && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"animate-in\",\n            children: selectedReport.classification !== 'sauvegarde' ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"empty-state\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"Cette proc\\xE9dure est r\\xE9serv\\xE9e aux cas class\\xE9s \\\"Sauvegarde\\\".\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 241,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  fontSize: '0.8rem',\n                  opacity: 0.7\n                },\n                children: \"Les cas \\\"Prise en charge\\\" et \\\"Faux\\\" sont cl\\xF4tur\\xE9s directement.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 242,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 240,\n              columnNumber: 21\n            }, this) : WORKFLOW_STEPS.map((step, i) => {\n              var _selectedReport$workf, _selectedReport$workf2, _selectedReport$workf3;\n              const status = (_selectedReport$workf = selectedReport.workflow) === null || _selectedReport$workf === void 0 ? void 0 : _selectedReport$workf[step.key];\n              const isDone = status === null || status === void 0 ? void 0 : status.completed;\n              const isNext = !isDone && (i === 0 || ((_selectedReport$workf2 = selectedReport.workflow) === null || _selectedReport$workf2 === void 0 ? void 0 : (_selectedReport$workf3 = _selectedReport$workf2[WORKFLOW_STEPS[i - 1].key]) === null || _selectedReport$workf3 === void 0 ? void 0 : _selectedReport$workf3.completed));\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: `workflow-step ${isDone ? 'completed' : ''}`,\n                style: {\n                  opacity: isDone || isNext ? 1 : 0.5\n                },\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    display: 'flex',\n                    alignItems: 'center',\n                    gap: '1rem',\n                    width: '100%'\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: `step-number ${isDone ? 'done' : 'pending'}`,\n                    children: isDone ? '‚úì' : i + 1\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 253,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      flex: 1\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      style: {\n                        fontWeight: 600\n                      },\n                      children: step.label\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 255,\n                      columnNumber: 31\n                    }, this), isDone && /*#__PURE__*/_jsxDEV(\"span\", {\n                      style: {\n                        fontSize: '0.8rem',\n                        color: 'var(--text-muted)'\n                      },\n                      children: [\"Fait le \", new Date(status.date).toLocaleDateString('fr-FR')]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 256,\n                      columnNumber: 42\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 254,\n                    columnNumber: 29\n                  }, this), isNext && /*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      display: 'flex',\n                      gap: '0.5rem'\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      className: \"btn-ghost btn-sm\",\n                      style: {\n                        cursor: 'pointer',\n                        margin: 0\n                      },\n                      children: [\"\\uD83D\\uDCCE Joindre doc\", /*#__PURE__*/_jsxDEV(\"input\", {\n                        type: \"file\",\n                        style: {\n                          display: 'none'\n                        }\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 262,\n                        columnNumber: 35\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 260,\n                      columnNumber: 33\n                    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                      className: \"btn-primary btn-sm\",\n                      onClick: () => handleWorkflowStep(selectedReport._id, step.key),\n                      children: \"Valider\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 264,\n                      columnNumber: 33\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 259,\n                    columnNumber: 31\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 252,\n                  columnNumber: 27\n                }, this)\n              }, step.key, false, {\n                fileName: _jsxFileName,\n                lineNumber: 251,\n                columnNumber: 25\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 238,\n            columnNumber: 17\n          }, this), activeTab === 'notes' && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"animate-in\",\n            children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n              value: notes,\n              onChange: e => setNotes(e.target.value),\n              placeholder: \"Espace r\\xE9serv\\xE9 aux notes cliniques et confidentielles...\",\n              style: {\n                height: '300px',\n                padding: '1.5rem',\n                fontFamily: 'monospace',\n                fontSize: '0.95rem'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 279,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: 'flex',\n                justifyContent: 'flex-end',\n                marginTop: '1rem'\n              },\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn-primary\",\n                onClick: () => handleSaveNotes(selectedReport._id),\n                children: \"\\uD83D\\uDCBE Enregistrer les notes\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 286,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 285,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 278,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"empty-state\",\n          style: {\n            height: '100%',\n            display: 'flex',\n            flexDirection: 'column',\n            justifyContent: 'center'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"icon\",\n            children: \"\\uD83D\\uDC48\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 296,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"S\\xE9lectionnez un dossier \\xE0 gauche pour commencer le traitement\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 297,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 295,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 122,\n    columnNumber: 5\n  }, this);\n};\n_s(DashboardPsychologist, \"/02WU+OdNg2F7bLLCqeYC1AmveU=\");\n_c = DashboardPsychologist;\nexport default DashboardPsychologist;\nvar _c;\n$RefreshReg$(_c, \"DashboardPsychologist\");","map":{"version":3,"names":["React","useEffect","useState","axios","io","TopBar","AiAssistant","jsxDEV","_jsxDEV","WORKFLOW_STEPS","key","label","DashboardPsychologist","_s","reports","setReports","selectedReport","setSelectedReport","loading","setLoading","notes","setNotes","activeTab","setActiveTab","timeLeft","setTimeLeft","fetchReports","socket","on","data","alert","childName","urgency","disconnect","deadline","status","interval","setInterval","now","Date","end","diff","clearInterval","hours","Math","floor","minutes","response","get","error","console","handleClassify","id","classification","put","updated","find","r","_id","handleWorkflowStep","step","stepIdx","findIndex","s","prevKey","workflow","completed","res","_error$response","_error$response$data","message","handleSaveNotes","getUrgencyBadge","u","map","critical","high","medium","low","className","children","fileName","_jsxFileName","lineNumber","columnNumber","role","style","display","gridTemplateColumns","gap","height","flexDirection","padding","length","overflowY","flex","paddingRight","onClick","confidentialNotes","borderLeft","justifyContent","marginBottom","fontWeight","childFirstName","childLastName","fontSize","color","program","createdAt","toLocaleDateString","village","background","borderRadius","pdfPath","window","open","split","pop","fontStyle","incidentDescription","incidentType","abuserFirstName","abuserLastName","anonymous","marginTop","minWidth","reportId","description","opacity","i","_selectedReport$workf","_selectedReport$workf2","_selectedReport$workf3","isDone","isNext","alignItems","width","date","cursor","margin","type","value","onChange","e","target","placeholder","fontFamily","_c","$RefreshReg$"],"sources":["C:/Users/ASUS/Desktop/rimontada/frontend/src/pages/DashboardPsychologist.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport io from 'socket.io-client';\r\nimport TopBar from '../components/TopBar';\r\nimport AiAssistant from '../components/AiAssistant';\r\n\r\nconst WORKFLOW_STEPS = [\r\n  { key: 'ficheInitiale', label: '1. Fiche initiale de signalement' },\r\n  { key: 'rapportDPE', label: '2. Rapport DPE (Notif. Direction)' },\r\n  { key: 'evaluationComplete', label: '3. √âvaluation compl√®te' },\r\n  { key: 'planAction', label: \"4. Plan d'action\" },\r\n  { key: 'rapportSuivi', label: '5. Rapport de suivi' },\r\n  { key: 'rapportFinal', label: '6. Rapport final' },\r\n  { key: 'avisCloture', label: '7. Avis de cl√¥ture' },\r\n];\r\n\r\nconst DashboardPsychologist = () => {\r\n  const [reports, setReports] = useState([]);\r\n  const [selectedReport, setSelectedReport] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [notes, setNotes] = useState('');\r\n  const [activeTab, setActiveTab] = useState('details');\r\n  const [timeLeft, setTimeLeft] = useState(null);\r\n\r\n  useEffect(() => {\r\n    fetchReports();\r\n    const socket = io();\r\n    socket.on('new-report', (data) => {\r\n      alert(`üîî Nouveau signalement: ${data.childName} (${data.urgency})`);\r\n      fetchReports();\r\n    });\r\n    return () => socket.disconnect();\r\n  }, []);\r\n\r\n  // Timer effect for Sauvegarde deadline\r\n  useEffect(() => {\r\n    if (selectedReport?.deadline && selectedReport.status === 'en_cours') {\r\n      const interval = setInterval(() => {\r\n        const now = new Date();\r\n        const end = new Date(selectedReport.deadline);\r\n        const diff = end - now;\r\n\r\n        if (diff <= 0) {\r\n          setTimeLeft('EXPIRED');\r\n          clearInterval(interval);\r\n        } else {\r\n          const hours = Math.floor(diff / (1000 * 60 * 60));\r\n          const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));\r\n          setTimeLeft(`${hours}h ${minutes}m restants`);\r\n        }\r\n      }, 60000); // Update every minute\r\n\r\n      // Initial set\r\n      const now = new Date();\r\n      const end = new Date(selectedReport.deadline);\r\n      const diff = end - now;\r\n      if (diff <= 0) setTimeLeft('EXPIRED');\r\n      else {\r\n        const hours = Math.floor(diff / (1000 * 60 * 60));\r\n        const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));\r\n        setTimeLeft(`${hours}h ${minutes}m restants`);\r\n      }\r\n\r\n      return () => clearInterval(interval);\r\n    } else {\r\n      setTimeLeft(null);\r\n    }\r\n  }, [selectedReport]);\r\n\r\n  const fetchReports = async () => {\r\n    try {\r\n      const response = await axios.get('/api/reports/prioritized');\r\n      setReports(response.data);\r\n    } catch (error) { console.error('Failed to fetch reports'); }\r\n    finally { setLoading(false); }\r\n  };\r\n\r\n  const handleClassify = async (id, classification) => {\r\n    try {\r\n      await axios.put(`/api/reports/${id}/classify`, { classification });\r\n      fetchReports();\r\n      const updated = await axios.get('/api/reports/prioritized'); // Refresh\r\n      setSelectedReport(updated.data.find(r => r._id === id));\r\n    } catch (error) { alert('‚ùå √âchec'); }\r\n  };\r\n\r\n  const handleWorkflowStep = async (id, step) => {\r\n    // Determine current step index\r\n    const stepIdx = WORKFLOW_STEPS.findIndex(s => s.key === step);\r\n\r\n    // Check previous step\r\n    if (stepIdx > 0) {\r\n      const prevKey = WORKFLOW_STEPS[stepIdx - 1].key;\r\n      if (!selectedReport.workflow[prevKey].completed) {\r\n        alert(`‚õî Vous devez d'abord compl√©ter l'√©tape : ${WORKFLOW_STEPS[stepIdx - 1].label}`);\r\n        return;\r\n      }\r\n    }\r\n\r\n    try {\r\n      // Ideally we'd upload a file here too\r\n      await axios.put(`/api/reports/${id}/workflow/${step}`);\r\n      const res = await axios.get('/api/reports/prioritized');\r\n      setReports(res.data);\r\n      setSelectedReport(res.data.find(r => r._id === id));\r\n    } catch (error) { alert('‚ùå √âchec: ' + (error.response?.data?.message || 'Erreur')); }\r\n  };\r\n\r\n  const handleSaveNotes = async (id) => {\r\n    try {\r\n      await axios.put(`/api/reports/${id}/notes`, { notes });\r\n      alert('üíæ Notes sauvegard√©es');\r\n    } catch (error) { alert('‚ùå √âchec'); }\r\n  };\r\n\r\n  const getUrgencyBadge = (u) => {\r\n    const map = { critical: 'badge-danger', high: 'badge-warning', medium: 'badge-info', low: 'badge-success' };\r\n    return <span className={`badge ${map[u] || 'badge-neutral'}`}>{u}</span>;\r\n  };\r\n\r\n  return (\r\n    <div className=\"app-layout\">\r\n      <TopBar role=\"psychologist\" />\r\n      <div className=\"page-content\" style={{ display: 'grid', gridTemplateColumns: 'minmax(300px, 350px) 1fr', gap: '2rem', height: 'calc(100vh - 100px)' }}>\r\n\r\n        {/* Left Column: Queue */}\r\n        <div className=\"card\" style={{ display: 'flex', flexDirection: 'column', height: '100%', padding: '1rem' }}>\r\n          <div className=\"card-header\">\r\n            <div>\r\n              <h3>File d'attente</h3>\r\n              <p className=\"subtitle\">{reports.length} dossiers priotitaires</p>\r\n            </div>\r\n          </div>\r\n          <div style={{ overflowY: 'auto', flex: 1, paddingRight: '0.5rem' }}>\r\n            {loading ? <p>Chargement...</p> : reports.length === 0 ? (\r\n              <div className=\"empty-state\"><p>Aucun dossier en attente</p></div>\r\n            ) : (\r\n              reports.map(r => (\r\n                <div key={r._id}\r\n                  className={`queue-item ${selectedReport?._id === r._id ? 'active' : ''}`}\r\n                  onClick={() => { setSelectedReport(r); setNotes(r.confidentialNotes || ''); setActiveTab('details'); }}\r\n                  style={{ borderLeft: `4px solid ${r.urgency === 'critical' ? 'var(--danger)' : r.urgency === 'high' ? 'var(--warning)' : 'var(--success)'}` }}\r\n                >\r\n                  <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '0.25rem' }}>\r\n                    <span style={{ fontWeight: 600 }}>{r.childFirstName} {r.childLastName}</span>\r\n                    {getUrgencyBadge(r.urgency)}\r\n                  </div>\r\n                  <div style={{ fontSize: '0.8rem', color: 'var(--text-muted)' }}>\r\n                    {r.program} ‚Ä¢ {new Date(r.createdAt).toLocaleDateString('fr-FR')}\r\n                  </div>\r\n                </div>\r\n              ))\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Right Column: Details */}\r\n        <div className=\"card\" style={{ height: '100%', overflowY: 'auto' }}>\r\n          {selectedReport ? (\r\n            <div className=\"animate-in\">\r\n              <div className=\"card-header\">\r\n                <div>\r\n                  <h2 style={{ fontSize: '1.5rem', marginBottom: '0.25rem' }}>{selectedReport.childFirstName} {selectedReport.childLastName}</h2>\r\n                  <p className=\"subtitle\">ID: {selectedReport._id} ‚Ä¢ {selectedReport.program} ‚Ä¢ {selectedReport.village}</p>\r\n                </div>\r\n                {/* 24h Timer Display */}\r\n                {timeLeft && (\r\n                  <div style={{\r\n                    background: timeLeft === 'EXPIRED' ? 'var(--danger)' : 'var(--warning)',\r\n                    color: 'white', padding: '0.5rem 1rem', borderRadius: '20px', fontWeight: 700\r\n                  }}>\r\n                    ‚è±Ô∏è Deadline: {timeLeft}\r\n                  </div>\r\n                )}\r\n                {selectedReport.pdfPath && (\r\n                  <button className=\"btn-secondary\" onClick={() => window.open(`/uploads/${selectedReport.pdfPath.split(/[\\\\/]/).pop()}`, '_blank')}>\r\n                    üìÑ Voir Rapport IA\r\n                  </button>\r\n                )}\r\n              </div>\r\n\r\n              <div className=\"tabs\">\r\n                <button className={`tab ${activeTab === 'details' ? 'active' : ''}`} onClick={() => setActiveTab('details')}>D√©tails & Classification</button>\r\n                <button className={`tab ${activeTab === 'workflow' ? 'active' : ''}`} onClick={() => setActiveTab('workflow')}>Proc√©dure (7 √©tapes)</button>\r\n                <button className={`tab ${activeTab === 'notes' ? 'active' : ''}`} onClick={() => setActiveTab('notes')}>Notes Confidentielles</button>\r\n              </div>\r\n\r\n              {activeTab === 'details' && (\r\n                <div className=\"animate-in\" style={{ display: 'grid', gridTemplateColumns: '2fr 1fr', gap: '2rem' }}>\r\n                  {/* Left: Details */}\r\n                  <div>\r\n                    <div style={{ background: 'var(--primary-50)', padding: '1.5rem', borderRadius: 'var(--radius)', marginBottom: '2rem' }}>\r\n                      <label>Description de l'incident</label>\r\n                      <p style={{ fontStyle: 'italic', fontSize: '1.05rem', color: 'var(--primary-dark)' }}>\"{selectedReport.incidentDescription}\"</p>\r\n                    </div>\r\n\r\n                    <div style={{ display: 'grid', gridTemplateColumns: 'repeat(2, 1fr)', gap: '1.5rem', marginBottom: '2rem' }}>\r\n                      <div>\r\n                        <label>Type d'incident</label>\r\n                        <div style={{ fontWeight: 600 }}>{selectedReport.incidentType}</div>\r\n                      </div>\r\n                      <div>\r\n                        <label>Abuseur pr√©sum√©</label>\r\n                        <div style={{ fontWeight: 600 }}>{selectedReport.abuserFirstName} {selectedReport.abuserLastName}</div>\r\n                      </div>\r\n                      <div>\r\n                        <label>Signalement Anonyme</label>\r\n                        <div style={{ fontWeight: 600 }}>{selectedReport.anonymous ? 'Oui' : 'Non'}</div>\r\n                      </div>\r\n                    </div>\r\n\r\n                    <h3 className=\"section-title\">Action requise</h3>\r\n                    <div style={{ display: 'flex', gap: '1rem', marginTop: '1rem' }}>\r\n                      <button className=\"btn-success btn-lg\" style={{ flex: 1 }} onClick={() => handleClassify(selectedReport._id, 'sauvegarde')}>\r\n                        ‚úÖ Sauvegarde\r\n                      </button>\r\n                      <button className=\"btn-primary btn-lg\" style={{ flex: 1 }} onClick={() => handleClassify(selectedReport._id, 'prise_en_charge')}>\r\n                        üõ°Ô∏è Prise en charge\r\n                      </button>\r\n                      <button className=\"btn-danger btn-lg\" style={{ flex: 1 }} onClick={() => handleClassify(selectedReport._id, 'faux')}>\r\n                        üóëÔ∏è Faux signalement\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Right: AI Assistant */}\r\n                  <div style={{ minWidth: '300px' }}>\r\n                    <AiAssistant\r\n                      reportId={selectedReport._id}\r\n                      description={selectedReport.incidentDescription}\r\n                      incidentType={selectedReport.incidentType}\r\n                    />\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {activeTab === 'workflow' && (\r\n                <div className=\"animate-in\">\r\n                  {selectedReport.classification !== 'sauvegarde' ? (\r\n                    <div className=\"empty-state\">\r\n                      <p>Cette proc√©dure est r√©serv√©e aux cas class√©s \"Sauvegarde\".</p>\r\n                      <p style={{ fontSize: '0.8rem', opacity: 0.7 }}>Les cas \"Prise en charge\" et \"Faux\" sont cl√¥tur√©s directement.</p>\r\n                    </div>\r\n                  ) : (\r\n                    WORKFLOW_STEPS.map((step, i) => {\r\n                      const status = selectedReport.workflow?.[step.key];\r\n                      const isDone = status?.completed;\r\n                      const isNext = !isDone && (i === 0 || selectedReport.workflow?.[WORKFLOW_STEPS[i - 1].key]?.completed);\r\n\r\n                      return (\r\n                        <div key={step.key} className={`workflow-step ${isDone ? 'completed' : ''}`} style={{ opacity: isDone || isNext ? 1 : 0.5 }}>\r\n                          <div style={{ display: 'flex', alignItems: 'center', gap: '1rem', width: '100%' }}>\r\n                            <div className={`step-number ${isDone ? 'done' : 'pending'}`}>{isDone ? '‚úì' : i + 1}</div>\r\n                            <div style={{ flex: 1 }}>\r\n                              <div style={{ fontWeight: 600 }}>{step.label}</div>\r\n                              {isDone && <span style={{ fontSize: '0.8rem', color: 'var(--text-muted)' }}>Fait le {new Date(status.date).toLocaleDateString('fr-FR')}</span>}\r\n                            </div>\r\n                            {isNext && (\r\n                              <div style={{ display: 'flex', gap: '0.5rem' }}>\r\n                                <label className=\"btn-ghost btn-sm\" style={{ cursor: 'pointer', margin: 0 }}>\r\n                                  üìé Joindre doc\r\n                                  <input type=\"file\" style={{ display: 'none' }} />\r\n                                </label>\r\n                                <button className=\"btn-primary btn-sm\" onClick={() => handleWorkflowStep(selectedReport._id, step.key)}>\r\n                                  Valider\r\n                                </button>\r\n                              </div>\r\n                            )}\r\n                          </div>\r\n                        </div>\r\n                      );\r\n                    })\r\n                  )}\r\n                </div>\r\n              )}\r\n\r\n              {activeTab === 'notes' && (\r\n                <div className=\"animate-in\">\r\n                  <textarea\r\n                    value={notes}\r\n                    onChange={(e) => setNotes(e.target.value)}\r\n                    placeholder=\"Espace r√©serv√© aux notes cliniques et confidentielles...\"\r\n                    style={{ height: '300px', padding: '1.5rem', fontFamily: 'monospace', fontSize: '0.95rem' }}\r\n                  />\r\n                  <div style={{ display: 'flex', justifyContent: 'flex-end', marginTop: '1rem' }}>\r\n                    <button className=\"btn-primary\" onClick={() => handleSaveNotes(selectedReport._id)}>\r\n                      üíæ Enregistrer les notes\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n            </div>\r\n          ) : (\r\n            <div className=\"empty-state\" style={{ height: '100%', display: 'flex', flexDirection: 'column', justifyContent: 'center' }}>\r\n              <div className=\"icon\">üëà</div>\r\n              <p>S√©lectionnez un dossier √† gauche pour commencer le traitement</p>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DashboardPsychologist;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}