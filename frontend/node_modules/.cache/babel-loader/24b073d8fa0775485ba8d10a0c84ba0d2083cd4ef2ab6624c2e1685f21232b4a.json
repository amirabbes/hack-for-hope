{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ASUS\\\\Desktop\\\\rimontada\\\\frontend\\\\src\\\\pages\\\\DashboardPsychologist.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst WORKFLOW_STEPS = [{\n  key: 'ficheInitiale',\n  label: 'Fiche initiale de signalement'\n}, {\n  key: 'rapportDPE',\n  label: 'Rapport DPE (Notifications Direction)'\n}, {\n  key: 'evaluationComplete',\n  label: 'Évaluation complète'\n}, {\n  key: 'planAction',\n  label: \"Plan d'action\"\n}, {\n  key: 'rapportSuivi',\n  label: 'Rapport de suivi'\n}, {\n  key: 'rapportFinal',\n  label: 'Rapport final'\n}, {\n  key: 'avisCloture',\n  label: 'Avis de clôture'\n}];\nconst DashboardPsychologist = () => {\n  _s();\n  const [reports, setReports] = useState([]);\n  const [selectedReport, setSelectedReport] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [notes, setNotes] = useState('');\n  const [activeTab, setActiveTab] = useState('details'); // details | workflow | notes\n\n  useEffect(() => {\n    fetchReports();\n  }, []);\n  const fetchReports = async () => {\n    try {\n      const response = await axios.get('/api/reports/prioritized');\n      setReports(response.data);\n    } catch (error) {\n      console.error('Failed to fetch reports');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleClassify = async (id, classification) => {\n    try {\n      await axios.put(`/api/reports/${id}/classify`, {\n        classification\n      });\n      alert(`Classifié: ${classification}`);\n      fetchReports();\n      setSelectedReport(null);\n    } catch (error) {\n      alert('Échec de la classification');\n    }\n  };\n  const handleWorkflowStep = async (id, step) => {\n    try {\n      await axios.put(`/api/reports/${id}/workflow/${step}`);\n      alert(`Étape \"${step}\" complétée`);\n      // Refresh the selected report\n      const res = await axios.get('/api/reports/prioritized');\n      setReports(res.data);\n      const updated = res.data.find(r => r._id === id);\n      if (updated) setSelectedReport(updated);\n    } catch (error) {\n      alert('Échec');\n    }\n  };\n  const handleSaveNotes = async id => {\n    try {\n      await axios.put(`/api/reports/${id}/notes`, {\n        notes\n      });\n      alert('Notes sauvegardées');\n    } catch (error) {\n      alert('Échec');\n    }\n  };\n  const getUrgencyColor = u => {\n    const map = {\n      critical: '#ef4444',\n      high: '#f97316',\n      medium: '#eab308',\n      low: '#22c55e'\n    };\n    return map[u] || '#94a3b8';\n  };\n  const getStatusLabel = s => {\n    const map = {\n      en_attente: 'En attente',\n      en_cours: 'En cours',\n      fausse_signalement: 'Fausse',\n      cloture: 'Clôturé'\n    };\n    return map[s] || s;\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      padding: '2rem',\n      maxWidth: '1300px',\n      margin: '0 auto',\n      width: '100%'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      style: {\n        color: 'var(--primary)',\n        marginBottom: '2rem',\n        textAlign: 'center'\n      },\n      children: \"Niveau 2 \\u2014 Analyse & Traitement\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'grid',\n        gridTemplateColumns: '350px 1fr',\n        gap: '2rem'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card\",\n        style: {\n          maxHeight: '85vh',\n          overflowY: 'auto'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            marginBottom: '1rem',\n            borderBottom: '2px solid #e2e8f0',\n            paddingBottom: '0.5rem'\n          },\n          children: \"File de signalements\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 11\n        }, this), loading ? /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Chargement...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 22\n        }, this) : reports.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Aucun signalement en attente.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 68\n        }, this) : reports.map(report => /*#__PURE__*/_jsxDEV(\"div\", {\n          onClick: () => {\n            setSelectedReport(report);\n            setNotes(report.confidentialNotes || '');\n            setActiveTab('details');\n          },\n          style: {\n            padding: '1rem',\n            borderRadius: '0.5rem',\n            marginBottom: '0.75rem',\n            cursor: 'pointer',\n            background: (selectedReport === null || selectedReport === void 0 ? void 0 : selectedReport._id) === report._id ? '#eff6ff' : 'white',\n            borderLeft: `5px solid ${getUrgencyColor(report.urgency)}`,\n            boxShadow: '0 1px 3px rgba(0,0,0,0.05)'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              justifyContent: 'space-between',\n              alignItems: 'center'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                fontWeight: '600',\n                margin: 0\n              },\n              children: [report.childFirstName, \" \", report.childLastName]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 102,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                fontSize: '0.7rem',\n                background: getUrgencyColor(report.urgency),\n                color: 'white',\n                padding: '0.15rem 0.5rem',\n                borderRadius: '1rem',\n                textTransform: 'uppercase'\n              },\n              children: report.urgency\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 103,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              fontSize: '0.8rem',\n              opacity: 0.6,\n              margin: '0.25rem 0 0 0'\n            },\n            children: [report.incidentType, \" \\u2022 \", report.program, \" \\u2022 \", getStatusLabel(report.status)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 17\n          }, this)]\n        }, report._id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 15\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card\",\n        children: selectedReport ? /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              justifyContent: 'space-between',\n              alignItems: 'flex-start',\n              marginBottom: '1rem'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                style: {\n                  fontSize: '1.4rem',\n                  margin: 0\n                },\n                children: [selectedReport.childFirstName, \" \", selectedReport.childLastName]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 122,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  opacity: 0.6,\n                  margin: '0.25rem 0'\n                },\n                children: [\"Village: \", selectedReport.program]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 123,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 121,\n              columnNumber: 17\n            }, this), selectedReport.pdfPath && /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => window.open(`/uploads/${selectedReport.pdfPath.split(/[\\\\/]/).pop()}`, '_blank'),\n              style: {\n                background: 'var(--secondary)',\n                color: 'white'\n              },\n              children: \"Voir PDF IA\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 126,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              gap: '0.5rem',\n              marginBottom: '1.5rem',\n              borderBottom: '2px solid #e2e8f0',\n              paddingBottom: '0.5rem'\n            },\n            children: ['details', 'workflow', 'notes'].map(tab => /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setActiveTab(tab),\n              style: {\n                background: activeTab === tab ? 'var(--primary)' : 'transparent',\n                color: activeTab === tab ? 'white' : 'var(--text)',\n                padding: '0.5rem 1rem'\n              },\n              children: tab === 'details' ? 'Détails' : tab === 'workflow' ? 'Procédure' : 'Notes confidentielles'\n            }, tab, false, {\n              fileName: _jsxFileName,\n              lineNumber: 136,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 15\n          }, this), activeTab === 'details' && /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                padding: '1rem',\n                background: '#f1f5f9',\n                borderRadius: '0.5rem',\n                marginBottom: '1.5rem'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                style: {\n                  marginBottom: '0.5rem'\n                },\n                children: \"Description libre\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 147,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  fontStyle: 'italic'\n                },\n                children: [\"\\\"\", selectedReport.incidentDescription, \"\\\"\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 148,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 146,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: 'grid',\n                gridTemplateColumns: '1fr 1fr',\n                gap: '0.5rem',\n                marginBottom: '1.5rem'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Abuseur:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 151,\n                  columnNumber: 24\n                }, this), \" \", selectedReport.abuserFirstName, \" \", selectedReport.abuserLastName]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 151,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Type:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 152,\n                  columnNumber: 24\n                }, this), \" \", selectedReport.incidentType]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 152,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Anonyme:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 153,\n                  columnNumber: 24\n                }, this), \" \", selectedReport.anonymous ? 'Oui' : 'Non']\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 153,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Status:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 154,\n                  columnNumber: 24\n                }, this), \" \", getStatusLabel(selectedReport.status)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 154,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 150,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n              style: {\n                marginBottom: '0.75rem'\n              },\n              children: \"Classification\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 157,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: 'flex',\n                gap: '0.75rem'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => handleClassify(selectedReport._id, 'sauvegarde'),\n                style: {\n                  flex: 1,\n                  background: 'var(--success)',\n                  color: 'white'\n                },\n                children: \"Sauvegarde\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 159,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => handleClassify(selectedReport._id, 'prise_en_charge'),\n                style: {\n                  flex: 1,\n                  background: 'var(--primary)',\n                  color: 'white'\n                },\n                children: \"Prise en charge\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 161,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => handleClassify(selectedReport._id, 'faux'),\n                style: {\n                  flex: 1,\n                  background: 'var(--danger)',\n                  color: 'white'\n                },\n                children: \"Faux\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 163,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 158,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 17\n          }, this), activeTab === 'workflow' && /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              style: {\n                marginBottom: '1rem'\n              },\n              children: \"Proc\\xE9dure de signalement (7 \\xE9tapes)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 172,\n              columnNumber: 19\n            }, this), WORKFLOW_STEPS.map((step, i) => {\n              var _selectedReport$workf;\n              const stepData = (_selectedReport$workf = selectedReport.workflow) === null || _selectedReport$workf === void 0 ? void 0 : _selectedReport$workf[step.key];\n              const isCompleted = stepData === null || stepData === void 0 ? void 0 : stepData.completed;\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  display: 'flex',\n                  justifyContent: 'space-between',\n                  alignItems: 'center',\n                  padding: '0.75rem 1rem',\n                  margin: '0.5rem 0',\n                  borderRadius: '0.5rem',\n                  background: isCompleted ? '#dcfce7' : '#f8fafc',\n                  border: `1px solid ${isCompleted ? '#86efac' : '#e2e8f0'}`\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    display: 'flex',\n                    alignItems: 'center',\n                    gap: '0.75rem'\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    style: {\n                      width: '28px',\n                      height: '28px',\n                      borderRadius: '50%',\n                      display: 'flex',\n                      alignItems: 'center',\n                      justifyContent: 'center',\n                      fontSize: '0.8rem',\n                      fontWeight: 'bold',\n                      background: isCompleted ? '#22c55e' : '#e2e8f0',\n                      color: isCompleted ? 'white' : '#64748b'\n                    },\n                    children: isCompleted ? '✓' : i + 1\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 184,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      style: {\n                        fontWeight: '600',\n                        margin: 0,\n                        fontSize: '0.95rem'\n                      },\n                      children: step.label\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 191,\n                      columnNumber: 29\n                    }, this), isCompleted && stepData.date && /*#__PURE__*/_jsxDEV(\"p\", {\n                      style: {\n                        margin: 0,\n                        fontSize: '0.75rem',\n                        opacity: 0.6\n                      },\n                      children: [\"Compl\\xE9t\\xE9 le \", new Date(stepData.date).toLocaleDateString('fr-FR')]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 193,\n                      columnNumber: 31\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 190,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 183,\n                  columnNumber: 25\n                }, this), !isCompleted && /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => handleWorkflowStep(selectedReport._id, step.key),\n                  style: {\n                    background: 'var(--primary)',\n                    color: 'white',\n                    padding: '0.4rem 0.8rem',\n                    fontSize: '0.85rem'\n                  },\n                  children: \"Compl\\xE9ter\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 200,\n                  columnNumber: 27\n                }, this)]\n              }, step.key, true, {\n                fileName: _jsxFileName,\n                lineNumber: 177,\n                columnNumber: 23\n              }, this);\n            })]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 17\n          }, this), activeTab === 'notes' && /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              style: {\n                marginBottom: '0.75rem'\n              },\n              children: \"Notes confidentielles du psychologue\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 214,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n              value: notes,\n              onChange: e => setNotes(e.target.value),\n              placeholder: \"R\\xE9diger vos observations confidentielles ici...\",\n              style: {\n                width: '100%',\n                height: '200px',\n                padding: '0.75rem',\n                borderRadius: '0.5rem',\n                border: '1px solid #e2e8f0',\n                marginBottom: '1rem'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 215,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => handleSaveNotes(selectedReport._id),\n              style: {\n                background: 'var(--primary)',\n                color: 'white'\n              },\n              children: \"Sauvegarder\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 218,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 213,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            textAlign: 'center',\n            paddingTop: '5rem',\n            opacity: 0.4\n          },\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              fontSize: '1.2rem'\n            },\n            children: \"S\\xE9lectionner un signalement pour l'analyser\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 81,\n    columnNumber: 5\n  }, this);\n};\n_s(DashboardPsychologist, \"tHi8yksH28THaPnBQPe7dFX4rt0=\");\n_c = DashboardPsychologist;\nexport default DashboardPsychologist;\nvar _c;\n$RefreshReg$(_c, \"DashboardPsychologist\");","map":{"version":3,"names":["React","useEffect","useState","axios","jsxDEV","_jsxDEV","WORKFLOW_STEPS","key","label","DashboardPsychologist","_s","reports","setReports","selectedReport","setSelectedReport","loading","setLoading","notes","setNotes","activeTab","setActiveTab","fetchReports","response","get","data","error","console","handleClassify","id","classification","put","alert","handleWorkflowStep","step","res","updated","find","r","_id","handleSaveNotes","getUrgencyColor","u","map","critical","high","medium","low","getStatusLabel","s","en_attente","en_cours","fausse_signalement","cloture","style","padding","maxWidth","margin","width","children","color","marginBottom","textAlign","fileName","_jsxFileName","lineNumber","columnNumber","display","gridTemplateColumns","gap","className","maxHeight","overflowY","borderBottom","paddingBottom","length","report","onClick","confidentialNotes","borderRadius","cursor","background","borderLeft","urgency","boxShadow","justifyContent","alignItems","fontWeight","childFirstName","childLastName","fontSize","textTransform","opacity","incidentType","program","status","pdfPath","window","open","split","pop","tab","fontStyle","incidentDescription","abuserFirstName","abuserLastName","anonymous","flex","i","_selectedReport$workf","stepData","workflow","isCompleted","completed","border","height","date","Date","toLocaleDateString","value","onChange","e","target","placeholder","paddingTop","_c","$RefreshReg$"],"sources":["C:/Users/ASUS/Desktop/rimontada/frontend/src/pages/DashboardPsychologist.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\n\r\nconst WORKFLOW_STEPS = [\r\n  { key: 'ficheInitiale', label: 'Fiche initiale de signalement' },\r\n  { key: 'rapportDPE', label: 'Rapport DPE (Notifications Direction)' },\r\n  { key: 'evaluationComplete', label: 'Évaluation complète' },\r\n  { key: 'planAction', label: \"Plan d'action\" },\r\n  { key: 'rapportSuivi', label: 'Rapport de suivi' },\r\n  { key: 'rapportFinal', label: 'Rapport final' },\r\n  { key: 'avisCloture', label: 'Avis de clôture' },\r\n];\r\n\r\nconst DashboardPsychologist = () => {\r\n  const [reports, setReports] = useState([]);\r\n  const [selectedReport, setSelectedReport] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [notes, setNotes] = useState('');\r\n  const [activeTab, setActiveTab] = useState('details'); // details | workflow | notes\r\n\r\n  useEffect(() => {\r\n    fetchReports();\r\n  }, []);\r\n\r\n  const fetchReports = async () => {\r\n    try {\r\n      const response = await axios.get('/api/reports/prioritized');\r\n      setReports(response.data);\r\n    } catch (error) {\r\n      console.error('Failed to fetch reports');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleClassify = async (id, classification) => {\r\n    try {\r\n      await axios.put(`/api/reports/${id}/classify`, { classification });\r\n      alert(`Classifié: ${classification}`);\r\n      fetchReports();\r\n      setSelectedReport(null);\r\n    } catch (error) {\r\n      alert('Échec de la classification');\r\n    }\r\n  };\r\n\r\n  const handleWorkflowStep = async (id, step) => {\r\n    try {\r\n      await axios.put(`/api/reports/${id}/workflow/${step}`);\r\n      alert(`Étape \"${step}\" complétée`);\r\n      // Refresh the selected report\r\n      const res = await axios.get('/api/reports/prioritized');\r\n      setReports(res.data);\r\n      const updated = res.data.find(r => r._id === id);\r\n      if (updated) setSelectedReport(updated);\r\n    } catch (error) {\r\n      alert('Échec');\r\n    }\r\n  };\r\n\r\n  const handleSaveNotes = async (id) => {\r\n    try {\r\n      await axios.put(`/api/reports/${id}/notes`, { notes });\r\n      alert('Notes sauvegardées');\r\n    } catch (error) {\r\n      alert('Échec');\r\n    }\r\n  };\r\n\r\n  const getUrgencyColor = (u) => {\r\n    const map = { critical: '#ef4444', high: '#f97316', medium: '#eab308', low: '#22c55e' };\r\n    return map[u] || '#94a3b8';\r\n  };\r\n\r\n  const getStatusLabel = (s) => {\r\n    const map = { en_attente: 'En attente', en_cours: 'En cours', fausse_signalement: 'Fausse', cloture: 'Clôturé' };\r\n    return map[s] || s;\r\n  };\r\n\r\n  return (\r\n    <div style={{ padding: '2rem', maxWidth: '1300px', margin: '0 auto', width: '100%' }}>\r\n      <h2 style={{ color: 'var(--primary)', marginBottom: '2rem', textAlign: 'center' }}>\r\n        Niveau 2 — Analyse & Traitement\r\n      </h2>\r\n\r\n      <div style={{ display: 'grid', gridTemplateColumns: '350px 1fr', gap: '2rem' }}>\r\n        {/* Queue */}\r\n        <div className=\"card\" style={{ maxHeight: '85vh', overflowY: 'auto' }}>\r\n          <h3 style={{ marginBottom: '1rem', borderBottom: '2px solid #e2e8f0', paddingBottom: '0.5rem' }}>\r\n            File de signalements\r\n          </h3>\r\n          {loading ? <p>Chargement...</p> : reports.length === 0 ? <p>Aucun signalement en attente.</p> : (\r\n            reports.map(report => (\r\n              <div key={report._id} onClick={() => { setSelectedReport(report); setNotes(report.confidentialNotes || ''); setActiveTab('details'); }}\r\n                style={{\r\n                  padding: '1rem', borderRadius: '0.5rem', marginBottom: '0.75rem', cursor: 'pointer',\r\n                  background: selectedReport?._id === report._id ? '#eff6ff' : 'white',\r\n                  borderLeft: `5px solid ${getUrgencyColor(report.urgency)}`,\r\n                  boxShadow: '0 1px 3px rgba(0,0,0,0.05)'\r\n                }}>\r\n                <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n                  <p style={{ fontWeight: '600', margin: 0 }}>{report.childFirstName} {report.childLastName}</p>\r\n                  <span style={{ fontSize: '0.7rem', background: getUrgencyColor(report.urgency), color: 'white', padding: '0.15rem 0.5rem', borderRadius: '1rem', textTransform: 'uppercase' }}>\r\n                    {report.urgency}\r\n                  </span>\r\n                </div>\r\n                <p style={{ fontSize: '0.8rem', opacity: 0.6, margin: '0.25rem 0 0 0' }}>\r\n                  {report.incidentType} • {report.program} • {getStatusLabel(report.status)}\r\n                </p>\r\n              </div>\r\n            ))\r\n          )}\r\n        </div>\r\n\r\n        {/* Detail Panel */}\r\n        <div className=\"card\">\r\n          {selectedReport ? (\r\n            <div>\r\n              {/* Header */}\r\n              <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start', marginBottom: '1rem' }}>\r\n                <div>\r\n                  <h3 style={{ fontSize: '1.4rem', margin: 0 }}>{selectedReport.childFirstName} {selectedReport.childLastName}</h3>\r\n                  <p style={{ opacity: 0.6, margin: '0.25rem 0' }}>Village: {selectedReport.program}</p>\r\n                </div>\r\n                {selectedReport.pdfPath && (\r\n                  <button onClick={() => window.open(`/uploads/${selectedReport.pdfPath.split(/[\\\\/]/).pop()}`, '_blank')}\r\n                    style={{ background: 'var(--secondary)', color: 'white' }}>\r\n                    Voir PDF IA\r\n                  </button>\r\n                )}\r\n              </div>\r\n\r\n              {/* Tab Nav */}\r\n              <div style={{ display: 'flex', gap: '0.5rem', marginBottom: '1.5rem', borderBottom: '2px solid #e2e8f0', paddingBottom: '0.5rem' }}>\r\n                {['details', 'workflow', 'notes'].map(tab => (\r\n                  <button key={tab} onClick={() => setActiveTab(tab)}\r\n                    style={{ background: activeTab === tab ? 'var(--primary)' : 'transparent', color: activeTab === tab ? 'white' : 'var(--text)', padding: '0.5rem 1rem' }}>\r\n                    {tab === 'details' ? 'Détails' : tab === 'workflow' ? 'Procédure' : 'Notes confidentielles'}\r\n                  </button>\r\n                ))}\r\n              </div>\r\n\r\n              {/* Tab: Details */}\r\n              {activeTab === 'details' && (\r\n                <div>\r\n                  <div style={{ padding: '1rem', background: '#f1f5f9', borderRadius: '0.5rem', marginBottom: '1.5rem' }}>\r\n                    <h4 style={{ marginBottom: '0.5rem' }}>Description libre</h4>\r\n                    <p style={{ fontStyle: 'italic' }}>\"{selectedReport.incidentDescription}\"</p>\r\n                  </div>\r\n                  <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '0.5rem', marginBottom: '1.5rem' }}>\r\n                    <p><strong>Abuseur:</strong> {selectedReport.abuserFirstName} {selectedReport.abuserLastName}</p>\r\n                    <p><strong>Type:</strong> {selectedReport.incidentType}</p>\r\n                    <p><strong>Anonyme:</strong> {selectedReport.anonymous ? 'Oui' : 'Non'}</p>\r\n                    <p><strong>Status:</strong> {getStatusLabel(selectedReport.status)}</p>\r\n                  </div>\r\n\r\n                  <h4 style={{ marginBottom: '0.75rem' }}>Classification</h4>\r\n                  <div style={{ display: 'flex', gap: '0.75rem' }}>\r\n                    <button onClick={() => handleClassify(selectedReport._id, 'sauvegarde')}\r\n                      style={{ flex: 1, background: 'var(--success)', color: 'white' }}>Sauvegarde</button>\r\n                    <button onClick={() => handleClassify(selectedReport._id, 'prise_en_charge')}\r\n                      style={{ flex: 1, background: 'var(--primary)', color: 'white' }}>Prise en charge</button>\r\n                    <button onClick={() => handleClassify(selectedReport._id, 'faux')}\r\n                      style={{ flex: 1, background: 'var(--danger)', color: 'white' }}>Faux</button>\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {/* Tab: Workflow */}\r\n              {activeTab === 'workflow' && (\r\n                <div>\r\n                  <h4 style={{ marginBottom: '1rem' }}>Procédure de signalement (7 étapes)</h4>\r\n                  {WORKFLOW_STEPS.map((step, i) => {\r\n                    const stepData = selectedReport.workflow?.[step.key];\r\n                    const isCompleted = stepData?.completed;\r\n                    return (\r\n                      <div key={step.key} style={{\r\n                        display: 'flex', justifyContent: 'space-between', alignItems: 'center',\r\n                        padding: '0.75rem 1rem', margin: '0.5rem 0', borderRadius: '0.5rem',\r\n                        background: isCompleted ? '#dcfce7' : '#f8fafc',\r\n                        border: `1px solid ${isCompleted ? '#86efac' : '#e2e8f0'}`\r\n                      }}>\r\n                        <div style={{ display: 'flex', alignItems: 'center', gap: '0.75rem' }}>\r\n                          <span style={{\r\n                            width: '28px', height: '28px', borderRadius: '50%', display: 'flex', alignItems: 'center', justifyContent: 'center', fontSize: '0.8rem', fontWeight: 'bold',\r\n                            background: isCompleted ? '#22c55e' : '#e2e8f0', color: isCompleted ? 'white' : '#64748b'\r\n                          }}>\r\n                            {isCompleted ? '✓' : i + 1}\r\n                          </span>\r\n                          <div>\r\n                            <p style={{ fontWeight: '600', margin: 0, fontSize: '0.95rem' }}>{step.label}</p>\r\n                            {isCompleted && stepData.date && (\r\n                              <p style={{ margin: 0, fontSize: '0.75rem', opacity: 0.6 }}>\r\n                                Complété le {new Date(stepData.date).toLocaleDateString('fr-FR')}\r\n                              </p>\r\n                            )}\r\n                          </div>\r\n                        </div>\r\n                        {!isCompleted && (\r\n                          <button onClick={() => handleWorkflowStep(selectedReport._id, step.key)}\r\n                            style={{ background: 'var(--primary)', color: 'white', padding: '0.4rem 0.8rem', fontSize: '0.85rem' }}>\r\n                            Compléter\r\n                          </button>\r\n                        )}\r\n                      </div>\r\n                    );\r\n                  })}\r\n                </div>\r\n              )}\r\n\r\n              {/* Tab: Notes */}\r\n              {activeTab === 'notes' && (\r\n                <div>\r\n                  <h4 style={{ marginBottom: '0.75rem' }}>Notes confidentielles du psychologue</h4>\r\n                  <textarea value={notes} onChange={(e) => setNotes(e.target.value)}\r\n                    placeholder=\"Rédiger vos observations confidentielles ici...\"\r\n                    style={{ width: '100%', height: '200px', padding: '0.75rem', borderRadius: '0.5rem', border: '1px solid #e2e8f0', marginBottom: '1rem' }} />\r\n                  <button onClick={() => handleSaveNotes(selectedReport._id)}\r\n                    style={{ background: 'var(--primary)', color: 'white' }}>\r\n                    Sauvegarder\r\n                  </button>\r\n                </div>\r\n              )}\r\n            </div>\r\n          ) : (\r\n            <div style={{ textAlign: 'center', paddingTop: '5rem', opacity: 0.4 }}>\r\n              <p style={{ fontSize: '1.2rem' }}>Sélectionner un signalement pour l'analyser</p>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DashboardPsychologist;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}