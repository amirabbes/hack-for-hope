{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ASUS\\\\Desktop\\\\rimontada\\\\frontend\\\\src\\\\pages\\\\DashboardPsychologist.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport io from 'socket.io-client';\nimport TopBar from '../components/TopBar';\nimport AiAssistant from '../components/AiAssistant';\nimport { useLanguage } from '../context/LanguageContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst WORKFLOW_STEPS = [{\n  key: 'ficheInitiale',\n  label: '1. Fiche initiale de signalement'\n}, {\n  key: 'rapportDPE',\n  label: '2. Rapport DPE (Notif. Direction)'\n}, {\n  key: 'evaluationComplete',\n  label: '3. √âvaluation compl√®te'\n}, {\n  key: 'planAction',\n  label: \"4. Plan d'action\"\n}, {\n  key: 'rapportSuivi',\n  label: '5. Rapport de suivi'\n}, {\n  key: 'rapportFinal',\n  label: '6. Rapport final'\n}, {\n  key: 'avisCloture',\n  label: '7. Avis de cl√¥ture'\n}];\nconst DashboardPsychologist = () => {\n  _s();\n  const {\n    t\n  } = useLanguage();\n  const [reports, setReports] = useState([]);\n  const [selectedReport, setSelectedReport] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [notes, setNotes] = useState('');\n  const [activeTab, setActiveTab] = useState('details');\n  const [timeLeft, setTimeLeft] = useState(null);\n  // State to hold the file selected for the current workflow step\n  const [stepFile, setStepFile] = useState(null);\n  useEffect(() => {\n    fetchReports();\n    const socket = io();\n    socket.on('new-report', data => {\n      alert(`üîî Nouveau signalement: ${data.childName} (${data.urgency})`);\n      fetchReports();\n    });\n    return () => socket.disconnect();\n  }, []);\n  useEffect(() => {\n    if (selectedReport !== null && selectedReport !== void 0 && selectedReport.deadline && selectedReport.status === 'en_cours') {\n      const updateTimer = () => {\n        const now = new Date();\n        const end = new Date(selectedReport.deadline);\n        const diff = end - now;\n        if (diff <= 0) {\n          setTimeLeft('EXPIRED');\n        } else {\n          const hours = Math.floor(diff / (1000 * 60 * 60));\n          const minutes = Math.floor(diff % (1000 * 60 * 60) / (1000 * 60));\n          setTimeLeft(`${hours}h ${minutes}m restants`);\n        }\n      };\n      updateTimer();\n      const interval = setInterval(updateTimer, 60000);\n      return () => clearInterval(interval);\n    } else {\n      setTimeLeft(null);\n    }\n  }, [selectedReport]);\n  const fetchReports = async () => {\n    try {\n      const response = await axios.get('/api/reports/prioritized');\n      setReports(response.data);\n    } catch (error) {\n      console.error('Failed to fetch reports');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleClassify = async (id, classification) => {\n    try {\n      await axios.put(`/api/reports/${id}/classify`, {\n        classification\n      });\n      fetchReports();\n      const updated = await axios.get('/api/reports/prioritized');\n      setSelectedReport(updated.data.find(r => r._id === id));\n    } catch (error) {\n      alert('‚ùå √âchec');\n    }\n  };\n  const handleWorkflowStep = async (id, step) => {\n    const stepIdx = WORKFLOW_STEPS.findIndex(s => s.key === step);\n\n    // Check previous step\n    if (stepIdx > 0) {\n      const prevKey = WORKFLOW_STEPS[stepIdx - 1].key;\n      if (!selectedReport.workflow[prevKey].completed) {\n        alert(`‚õî Vous devez d'abord compl√©ter l'√©tape pr√©c√©dente.`);\n        return;\n      }\n    }\n\n    // Require Document Upload\n    if (!stepFile) {\n      alert('‚õî Vous devez IMP√âRATIVEMENT importer un fichier justificatif pour valider cette √©tape.');\n      return;\n    }\n    try {\n      const formData = new FormData();\n      formData.append('document', stepFile);\n      await axios.put(`/api/reports/${id}/workflow/${step}`, formData);\n      const res = await axios.get('/api/reports/prioritized');\n      setReports(res.data);\n      setSelectedReport(res.data.find(r => r._id === id));\n      setStepFile(null); // Reset file input\n      alert('‚úÖ √âtape valid√©e avec succ√®s !');\n    } catch (error) {\n      var _error$response, _error$response$data;\n      alert('‚ùå √âchec: ' + (((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || 'Erreur'));\n    }\n  };\n  const handleSaveNotes = async id => {\n    try {\n      await axios.put(`/api/reports/${id}/notes`, {\n        notes\n      });\n      alert(t('psych.notes.save') + ' ‚úÖ');\n    } catch (error) {\n      alert('‚ùå √âchec');\n    }\n  };\n  const getUrgencyBadge = u => {\n    const map = {\n      critical: 'badge-danger',\n      high: 'badge-warning',\n      medium: 'badge-info',\n      low: 'badge-success'\n    };\n    return /*#__PURE__*/_jsxDEV(\"span\", {\n      className: `badge ${map[u] || 'badge-neutral'}`,\n      children: u\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 12\n    }, this);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"app-layout\",\n    children: [/*#__PURE__*/_jsxDEV(TopBar, {\n      role: \"psychologist\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"page-content\",\n      style: {\n        display: 'grid',\n        gridTemplateColumns: 'minmax(300px, 350px) 1fr',\n        gap: '2rem',\n        height: 'calc(100vh - 100px)'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card\",\n        style: {\n          display: 'flex',\n          flexDirection: 'column',\n          height: '100%',\n          padding: '1rem'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-header\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: t('psych.queue.title')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 132,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"subtitle\",\n              children: [reports.length, \" \", t('psych.queue.subtitle')]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 133,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            overflowY: 'auto',\n            flex: 1,\n            paddingRight: '0.5rem'\n          },\n          children: loading ? /*#__PURE__*/_jsxDEV(\"p\", {\n            children: t('loading')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 24\n          }, this) : reports.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"empty-state\",\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              children: t('mother.history.empty')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 138,\n              columnNumber: 44\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 15\n          }, this) : reports.map(r => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `queue-item ${(selectedReport === null || selectedReport === void 0 ? void 0 : selectedReport._id) === r._id ? 'active' : ''}`,\n            onClick: () => {\n              setSelectedReport(r);\n              setNotes(r.confidentialNotes || '');\n              setActiveTab('details');\n            },\n            style: {\n              borderLeft: `4px solid ${r.urgency === 'critical' ? 'var(--danger)' : r.urgency === 'high' ? 'var(--warning)' : 'var(--success)'}`\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: 'flex',\n                justifyContent: 'space-between',\n                marginBottom: '0.25rem'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                style: {\n                  fontWeight: 600\n                },\n                children: [r.childFirstName, \" \", r.childLastName]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 147,\n                columnNumber: 21\n              }, this), getUrgencyBadge(r.urgency)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 146,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: '0.8rem',\n                color: 'var(--text-muted)'\n              },\n              children: [r.village, \" \\u2022 \", new Date(r.createdAt).toLocaleDateString()]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 150,\n              columnNumber: 19\n            }, this)]\n          }, r._id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card\",\n        style: {\n          height: '100%',\n          overflowY: 'auto'\n        },\n        children: selectedReport ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"animate-in\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-header\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                style: {\n                  fontSize: '1.5rem',\n                  marginBottom: '0.25rem'\n                },\n                children: [selectedReport.childFirstName, \" \", selectedReport.childLastName]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 165,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"subtitle\",\n                children: [\"ID: \", selectedReport._id, \" \\u2022 \", selectedReport.village]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 166,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 164,\n              columnNumber: 17\n            }, this), timeLeft && /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                background: timeLeft === 'EXPIRED' ? 'var(--danger)' : 'var(--warning)',\n                color: 'white',\n                padding: '0.5rem 1rem',\n                borderRadius: '20px',\n                fontWeight: 700\n              },\n              children: [\"\\u23F1\\uFE0F \", timeLeft]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 169,\n              columnNumber: 19\n            }, this), selectedReport.pdfPath && /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn-secondary\",\n              onClick: () => window.open(`/uploads/${selectedReport.pdfPath.split(/[\\\\/]/).pop()}`, '_blank'),\n              children: \"\\uD83D\\uDCC4 Voir Rapport IA\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 177,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"tabs\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: `tab ${activeTab === 'details' ? 'active' : ''}`,\n              onClick: () => setActiveTab('details'),\n              children: t('psych.details')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 184,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: `tab ${activeTab === 'workflow' ? 'active' : ''}`,\n              onClick: () => setActiveTab('workflow'),\n              children: t('psych.workflow')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 185,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: `tab ${activeTab === 'notes' ? 'active' : ''}`,\n              onClick: () => setActiveTab('notes'),\n              children: t('psych.notes')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 186,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 15\n          }, this), activeTab === 'details' && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"animate-in\",\n            style: {\n              display: 'grid',\n              gridTemplateColumns: '2fr 1fr',\n              gap: '2rem'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  background: 'var(--primary-50)',\n                  padding: '1.5rem',\n                  borderRadius: 'var(--radius)',\n                  marginBottom: '2rem'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: t('psych.incident.desc')\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 193,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  style: {\n                    fontStyle: 'italic',\n                    fontSize: '1.05rem',\n                    color: 'var(--primary-dark)'\n                  },\n                  children: [\"\\\"\", selectedReport.incidentDescription, \"\\\"\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 194,\n                  columnNumber: 23\n                }, this), selectedReport.attachments && selectedReport.attachments.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    marginTop: '1rem'\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    children: t('psych.media')\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 199,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      display: 'flex',\n                      flexWrap: 'wrap',\n                      gap: '0.5rem'\n                    },\n                    children: selectedReport.attachments.map((path, idx) => {\n                      const fileName = path.split(/[\\\\/]/).pop();\n                      return /*#__PURE__*/_jsxDEV(\"a\", {\n                        href: `/uploads/${fileName}`,\n                        target: \"_blank\",\n                        rel: \"noopener noreferrer\",\n                        className: \"badge badge-info\",\n                        style: {\n                          textDecoration: 'none'\n                        },\n                        children: [\"\\uD83D\\uDCCE Fichier \", idx + 1]\n                      }, idx, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 204,\n                        columnNumber: 33\n                      }, this);\n                    })\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 200,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 198,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 192,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  display: 'grid',\n                  gridTemplateColumns: 'repeat(2, 1fr)',\n                  gap: '1.5rem',\n                  marginBottom: '2rem'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    children: t('psych.incident.type')\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 216,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      fontWeight: 600\n                    },\n                    children: selectedReport.incidentType\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 217,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 215,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    children: t('psych.incident.abuser')\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 220,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      fontWeight: 600\n                    },\n                    children: [selectedReport.abuserFirstName, \" \", selectedReport.abuserLastName]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 221,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 219,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    children: t('psych.incident.anonymous')\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 224,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      fontWeight: 600\n                    },\n                    children: selectedReport.anonymous ? 'Oui' : 'Non'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 225,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 223,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 214,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"section-title\",\n                children: t('psych.action.required')\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 229,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  display: 'flex',\n                  gap: '1rem',\n                  marginTop: '1rem'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn-success btn-lg\",\n                  style: {\n                    flex: 1\n                  },\n                  onClick: () => handleClassify(selectedReport._id, 'sauvegarde'),\n                  children: t('psych.action.save')\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 231,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn-primary btn-lg\",\n                  style: {\n                    flex: 1\n                  },\n                  onClick: () => handleClassify(selectedReport._id, 'prise_en_charge'),\n                  children: t('psych.action.care')\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 234,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn-danger btn-lg\",\n                  style: {\n                    flex: 1\n                  },\n                  onClick: () => handleClassify(selectedReport._id, 'faux'),\n                  children: t('psych.action.fake')\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 237,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 230,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 191,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                minWidth: '300px'\n              },\n              children: /*#__PURE__*/_jsxDEV(AiAssistant, {\n                reportId: selectedReport._id,\n                description: selectedReport.incidentDescription,\n                incidentType: selectedReport.incidentType\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 244,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 243,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 17\n          }, this), activeTab === 'workflow' && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"animate-in\",\n            children: selectedReport.classification !== 'sauvegarde' ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"empty-state\",\n              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"Cette proc\\xE9dure est r\\xE9serv\\xE9e aux cas class\\xE9s \\\"Sauvegarde\\\".\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 253,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 252,\n              columnNumber: 21\n            }, this) : WORKFLOW_STEPS.map((step, i) => {\n              var _selectedReport$workf, _selectedReport$workf2, _selectedReport$workf3;\n              const status = (_selectedReport$workf = selectedReport.workflow) === null || _selectedReport$workf === void 0 ? void 0 : _selectedReport$workf[step.key];\n              const isDone = status === null || status === void 0 ? void 0 : status.completed;\n              const isNext = !isDone && (i === 0 || ((_selectedReport$workf2 = selectedReport.workflow) === null || _selectedReport$workf2 === void 0 ? void 0 : (_selectedReport$workf3 = _selectedReport$workf2[WORKFLOW_STEPS[i - 1].key]) === null || _selectedReport$workf3 === void 0 ? void 0 : _selectedReport$workf3.completed));\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: `workflow-step ${isDone ? 'completed' : ''}`,\n                style: {\n                  opacity: isDone || isNext ? 1 : 0.5\n                },\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    display: 'flex',\n                    alignItems: 'center',\n                    gap: '1rem',\n                    width: '100%'\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: `step-number ${isDone ? 'done' : 'pending'}`,\n                    children: isDone ? '‚úì' : i + 1\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 264,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      flex: 1\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      style: {\n                        fontWeight: 600\n                      },\n                      children: step.label\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 266,\n                      columnNumber: 31\n                    }, this), isDone && /*#__PURE__*/_jsxDEV(\"span\", {\n                      style: {\n                        fontSize: '0.8rem',\n                        color: 'var(--text-muted)'\n                      },\n                      children: [t('psych.workflow.done'), \" \", new Date(status.date).toLocaleDateString()]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 267,\n                      columnNumber: 42\n                    }, this), isDone && status.document && /*#__PURE__*/_jsxDEV(\"div\", {\n                      style: {\n                        marginTop: '0.25rem'\n                      },\n                      children: /*#__PURE__*/_jsxDEV(\"a\", {\n                        href: `/uploads/${status.document.split(/[\\\\/]/).pop()}`,\n                        target: \"_blank\",\n                        className: \"badge badge-neutral\",\n                        children: \"\\uD83D\\uDCC4 Document joint\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 270,\n                        columnNumber: 35\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 269,\n                      columnNumber: 33\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 265,\n                    columnNumber: 29\n                  }, this), isNext && /*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      display: 'flex',\n                      gap: '0.5rem',\n                      alignItems: 'center'\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      className: \"btn-ghost btn-sm\",\n                      style: {\n                        cursor: 'pointer',\n                        margin: 0,\n                        border: stepFile ? '2px solid var(--success)' : '1px solid var(--border)'\n                      },\n                      children: [stepFile ? 'üìÑ Fichier pr√™t' : t('psych.workflow.attach'), /*#__PURE__*/_jsxDEV(\"input\", {\n                        type: \"file\",\n                        style: {\n                          display: 'none'\n                        },\n                        onChange: e => setStepFile(e.target.files[0])\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 278,\n                        columnNumber: 35\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 276,\n                      columnNumber: 33\n                    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                      className: \"btn-primary btn-sm\",\n                      onClick: () => handleWorkflowStep(selectedReport._id, step.key),\n                      disabled: !stepFile,\n                      children: t('psych.workflow.validate')\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 280,\n                      columnNumber: 33\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 275,\n                    columnNumber: 31\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 263,\n                  columnNumber: 27\n                }, this)\n              }, step.key, false, {\n                fileName: _jsxFileName,\n                lineNumber: 262,\n                columnNumber: 25\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 250,\n            columnNumber: 17\n          }, this), activeTab === 'notes' && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"animate-in\",\n            children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n              value: notes,\n              onChange: e => setNotes(e.target.value),\n              placeholder: t('psych.notes.placeholder'),\n              style: {\n                height: '300px',\n                padding: '1.5rem',\n                fontFamily: 'monospace',\n                fontSize: '0.95rem'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 295,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: 'flex',\n                justifyContent: 'flex-end',\n                marginTop: '1rem'\n              },\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn-primary\",\n                onClick: () => handleSaveNotes(selectedReport._id),\n                children: t('psych.notes.save')\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 302,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 301,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 294,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"empty-state\",\n          style: {\n            height: '100%',\n            display: 'flex',\n            flexDirection: 'column',\n            justifyContent: 'center'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"icon\",\n            children: \"\\uD83D\\uDC48\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 312,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: t('mother.history.empty') || \"S√©lectionnez un dossier\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 313,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 311,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 124,\n    columnNumber: 5\n  }, this);\n};\n_s(DashboardPsychologist, \"s3Z+OdvQB3oR2EZiXgdNXfS4CB4=\", false, function () {\n  return [useLanguage];\n});\n_c = DashboardPsychologist;\nexport default DashboardPsychologist;\nvar _c;\n$RefreshReg$(_c, \"DashboardPsychologist\");","map":{"version":3,"names":["React","useEffect","useState","axios","io","TopBar","AiAssistant","useLanguage","jsxDEV","_jsxDEV","WORKFLOW_STEPS","key","label","DashboardPsychologist","_s","t","reports","setReports","selectedReport","setSelectedReport","loading","setLoading","notes","setNotes","activeTab","setActiveTab","timeLeft","setTimeLeft","stepFile","setStepFile","fetchReports","socket","on","data","alert","childName","urgency","disconnect","deadline","status","updateTimer","now","Date","end","diff","hours","Math","floor","minutes","interval","setInterval","clearInterval","response","get","error","console","handleClassify","id","classification","put","updated","find","r","_id","handleWorkflowStep","step","stepIdx","findIndex","s","prevKey","workflow","completed","formData","FormData","append","res","_error$response","_error$response$data","message","handleSaveNotes","getUrgencyBadge","u","map","critical","high","medium","low","className","children","fileName","_jsxFileName","lineNumber","columnNumber","role","style","display","gridTemplateColumns","gap","height","flexDirection","padding","length","overflowY","flex","paddingRight","onClick","confidentialNotes","borderLeft","justifyContent","marginBottom","fontWeight","childFirstName","childLastName","fontSize","color","village","createdAt","toLocaleDateString","background","borderRadius","pdfPath","window","open","split","pop","fontStyle","incidentDescription","attachments","marginTop","flexWrap","path","idx","href","target","rel","textDecoration","incidentType","abuserFirstName","abuserLastName","anonymous","minWidth","reportId","description","i","_selectedReport$workf","_selectedReport$workf2","_selectedReport$workf3","isDone","isNext","opacity","alignItems","width","date","document","cursor","margin","border","type","onChange","e","files","disabled","value","placeholder","fontFamily","_c","$RefreshReg$"],"sources":["C:/Users/ASUS/Desktop/rimontada/frontend/src/pages/DashboardPsychologist.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport io from 'socket.io-client';\r\nimport TopBar from '../components/TopBar';\r\nimport AiAssistant from '../components/AiAssistant';\r\nimport { useLanguage } from '../context/LanguageContext';\r\n\r\nconst WORKFLOW_STEPS = [\r\n  { key: 'ficheInitiale', label: '1. Fiche initiale de signalement' },\r\n  { key: 'rapportDPE', label: '2. Rapport DPE (Notif. Direction)' },\r\n  { key: 'evaluationComplete', label: '3. √âvaluation compl√®te' },\r\n  { key: 'planAction', label: \"4. Plan d'action\" },\r\n  { key: 'rapportSuivi', label: '5. Rapport de suivi' },\r\n  { key: 'rapportFinal', label: '6. Rapport final' },\r\n  { key: 'avisCloture', label: '7. Avis de cl√¥ture' },\r\n];\r\n\r\nconst DashboardPsychologist = () => {\r\n  const { t } = useLanguage();\r\n  const [reports, setReports] = useState([]);\r\n  const [selectedReport, setSelectedReport] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [notes, setNotes] = useState('');\r\n  const [activeTab, setActiveTab] = useState('details');\r\n  const [timeLeft, setTimeLeft] = useState(null);\r\n  // State to hold the file selected for the current workflow step\r\n  const [stepFile, setStepFile] = useState(null);\r\n\r\n  useEffect(() => {\r\n    fetchReports();\r\n    const socket = io();\r\n    socket.on('new-report', (data) => {\r\n      alert(`üîî Nouveau signalement: ${data.childName} (${data.urgency})`);\r\n      fetchReports();\r\n    });\r\n    return () => socket.disconnect();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (selectedReport?.deadline && selectedReport.status === 'en_cours') {\r\n      const updateTimer = () => {\r\n        const now = new Date();\r\n        const end = new Date(selectedReport.deadline);\r\n        const diff = end - now;\r\n\r\n        if (diff <= 0) {\r\n          setTimeLeft('EXPIRED');\r\n        } else {\r\n          const hours = Math.floor(diff / (1000 * 60 * 60));\r\n          const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));\r\n          setTimeLeft(`${hours}h ${minutes}m restants`);\r\n        }\r\n      };\r\n\r\n      updateTimer();\r\n      const interval = setInterval(updateTimer, 60000);\r\n      return () => clearInterval(interval);\r\n    } else {\r\n      setTimeLeft(null);\r\n    }\r\n  }, [selectedReport]);\r\n\r\n  const fetchReports = async () => {\r\n    try {\r\n      const response = await axios.get('/api/reports/prioritized');\r\n      setReports(response.data);\r\n    } catch (error) { console.error('Failed to fetch reports'); }\r\n    finally { setLoading(false); }\r\n  };\r\n\r\n  const handleClassify = async (id, classification) => {\r\n    try {\r\n      await axios.put(`/api/reports/${id}/classify`, { classification });\r\n      fetchReports();\r\n      const updated = await axios.get('/api/reports/prioritized');\r\n      setSelectedReport(updated.data.find(r => r._id === id));\r\n    } catch (error) { alert('‚ùå √âchec'); }\r\n  };\r\n\r\n  const handleWorkflowStep = async (id, step) => {\r\n    const stepIdx = WORKFLOW_STEPS.findIndex(s => s.key === step);\r\n\r\n    // Check previous step\r\n    if (stepIdx > 0) {\r\n      const prevKey = WORKFLOW_STEPS[stepIdx - 1].key;\r\n      if (!selectedReport.workflow[prevKey].completed) {\r\n        alert(`‚õî Vous devez d'abord compl√©ter l'√©tape pr√©c√©dente.`);\r\n        return;\r\n      }\r\n    }\r\n\r\n    // Require Document Upload\r\n    if (!stepFile) {\r\n      alert('‚õî Vous devez IMP√âRATIVEMENT importer un fichier justificatif pour valider cette √©tape.');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const formData = new FormData();\r\n      formData.append('document', stepFile);\r\n\r\n      await axios.put(`/api/reports/${id}/workflow/${step}`, formData);\r\n      const res = await axios.get('/api/reports/prioritized');\r\n      setReports(res.data);\r\n      setSelectedReport(res.data.find(r => r._id === id));\r\n      setStepFile(null); // Reset file input\r\n      alert('‚úÖ √âtape valid√©e avec succ√®s !');\r\n    } catch (error) { alert('‚ùå √âchec: ' + (error.response?.data?.message || 'Erreur')); }\r\n  };\r\n\r\n  const handleSaveNotes = async (id) => {\r\n    try {\r\n      await axios.put(`/api/reports/${id}/notes`, { notes });\r\n      alert(t('psych.notes.save') + ' ‚úÖ');\r\n    } catch (error) { alert('‚ùå √âchec'); }\r\n  };\r\n\r\n  const getUrgencyBadge = (u) => {\r\n    const map = { critical: 'badge-danger', high: 'badge-warning', medium: 'badge-info', low: 'badge-success' };\r\n    return <span className={`badge ${map[u] || 'badge-neutral'}`}>{u}</span>;\r\n  };\r\n\r\n  return (\r\n    <div className=\"app-layout\">\r\n      <TopBar role=\"psychologist\" />\r\n      <div className=\"page-content\" style={{ display: 'grid', gridTemplateColumns: 'minmax(300px, 350px) 1fr', gap: '2rem', height: 'calc(100vh - 100px)' }}>\r\n\r\n        {/* Queue */}\r\n        <div className=\"card\" style={{ display: 'flex', flexDirection: 'column', height: '100%', padding: '1rem' }}>\r\n          <div className=\"card-header\">\r\n            <div>\r\n              <h3>{t('psych.queue.title')}</h3>\r\n              <p className=\"subtitle\">{reports.length} {t('psych.queue.subtitle')}</p>\r\n            </div>\r\n          </div>\r\n          <div style={{ overflowY: 'auto', flex: 1, paddingRight: '0.5rem' }}>\r\n            {loading ? <p>{t('loading')}</p> : reports.length === 0 ? (\r\n              <div className=\"empty-state\"><p>{t('mother.history.empty')}</p></div>\r\n            ) : (\r\n              reports.map(r => (\r\n                <div key={r._id}\r\n                  className={`queue-item ${selectedReport?._id === r._id ? 'active' : ''}`}\r\n                  onClick={() => { setSelectedReport(r); setNotes(r.confidentialNotes || ''); setActiveTab('details'); }}\r\n                  style={{ borderLeft: `4px solid ${r.urgency === 'critical' ? 'var(--danger)' : r.urgency === 'high' ? 'var(--warning)' : 'var(--success)'}` }}\r\n                >\r\n                  <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '0.25rem' }}>\r\n                    <span style={{ fontWeight: 600 }}>{r.childFirstName} {r.childLastName}</span>\r\n                    {getUrgencyBadge(r.urgency)}\r\n                  </div>\r\n                  <div style={{ fontSize: '0.8rem', color: 'var(--text-muted)' }}>\r\n                    {r.village} ‚Ä¢ {new Date(r.createdAt).toLocaleDateString()}\r\n                  </div>\r\n                </div>\r\n              ))\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Details */}\r\n        <div className=\"card\" style={{ height: '100%', overflowY: 'auto' }}>\r\n          {selectedReport ? (\r\n            <div className=\"animate-in\">\r\n              <div className=\"card-header\">\r\n                <div>\r\n                  <h2 style={{ fontSize: '1.5rem', marginBottom: '0.25rem' }}>{selectedReport.childFirstName} {selectedReport.childLastName}</h2>\r\n                  <p className=\"subtitle\">ID: {selectedReport._id} ‚Ä¢ {selectedReport.village}</p>\r\n                </div>\r\n                {timeLeft && (\r\n                  <div style={{\r\n                    background: timeLeft === 'EXPIRED' ? 'var(--danger)' : 'var(--warning)',\r\n                    color: 'white', padding: '0.5rem 1rem', borderRadius: '20px', fontWeight: 700\r\n                  }}>\r\n                    ‚è±Ô∏è {timeLeft}\r\n                  </div>\r\n                )}\r\n                {selectedReport.pdfPath && (\r\n                  <button className=\"btn-secondary\" onClick={() => window.open(`/uploads/${selectedReport.pdfPath.split(/[\\\\/]/).pop()}`, '_blank')}>\r\n                    üìÑ Voir Rapport IA\r\n                  </button>\r\n                )}\r\n              </div>\r\n\r\n              <div className=\"tabs\">\r\n                <button className={`tab ${activeTab === 'details' ? 'active' : ''}`} onClick={() => setActiveTab('details')}>{t('psych.details')}</button>\r\n                <button className={`tab ${activeTab === 'workflow' ? 'active' : ''}`} onClick={() => setActiveTab('workflow')}>{t('psych.workflow')}</button>\r\n                <button className={`tab ${activeTab === 'notes' ? 'active' : ''}`} onClick={() => setActiveTab('notes')}>{t('psych.notes')}</button>\r\n              </div>\r\n\r\n              {activeTab === 'details' && (\r\n                <div className=\"animate-in\" style={{ display: 'grid', gridTemplateColumns: '2fr 1fr', gap: '2rem' }}>\r\n                  <div>\r\n                    <div style={{ background: 'var(--primary-50)', padding: '1.5rem', borderRadius: 'var(--radius)', marginBottom: '2rem' }}>\r\n                      <label>{t('psych.incident.desc')}</label>\r\n                      <p style={{ fontStyle: 'italic', fontSize: '1.05rem', color: 'var(--primary-dark)' }}>\"{selectedReport.incidentDescription}\"</p>\r\n\r\n                      {/* Media Display */}\r\n                      {selectedReport.attachments && selectedReport.attachments.length > 0 && (\r\n                        <div style={{ marginTop: '1rem' }}>\r\n                          <label>{t('psych.media')}</label>\r\n                          <div style={{ display: 'flex', flexWrap: 'wrap', gap: '0.5rem' }}>\r\n                            {selectedReport.attachments.map((path, idx) => {\r\n                              const fileName = path.split(/[\\\\/]/).pop();\r\n                              return (\r\n                                <a key={idx} href={`/uploads/${fileName}`} target=\"_blank\" rel=\"noopener noreferrer\" className=\"badge badge-info\" style={{ textDecoration: 'none' }}>\r\n                                  üìé Fichier {idx + 1}\r\n                                </a>\r\n                              );\r\n                            })}\r\n                          </div>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n\r\n                    <div style={{ display: 'grid', gridTemplateColumns: 'repeat(2, 1fr)', gap: '1.5rem', marginBottom: '2rem' }}>\r\n                      <div>\r\n                        <label>{t('psych.incident.type')}</label>\r\n                        <div style={{ fontWeight: 600 }}>{selectedReport.incidentType}</div>\r\n                      </div>\r\n                      <div>\r\n                        <label>{t('psych.incident.abuser')}</label>\r\n                        <div style={{ fontWeight: 600 }}>{selectedReport.abuserFirstName} {selectedReport.abuserLastName}</div>\r\n                      </div>\r\n                      <div>\r\n                        <label>{t('psych.incident.anonymous')}</label>\r\n                        <div style={{ fontWeight: 600 }}>{selectedReport.anonymous ? 'Oui' : 'Non'}</div>\r\n                      </div>\r\n                    </div>\r\n\r\n                    <h3 className=\"section-title\">{t('psych.action.required')}</h3>\r\n                    <div style={{ display: 'flex', gap: '1rem', marginTop: '1rem' }}>\r\n                      <button className=\"btn-success btn-lg\" style={{ flex: 1 }} onClick={() => handleClassify(selectedReport._id, 'sauvegarde')}>\r\n                        {t('psych.action.save')}\r\n                      </button>\r\n                      <button className=\"btn-primary btn-lg\" style={{ flex: 1 }} onClick={() => handleClassify(selectedReport._id, 'prise_en_charge')}>\r\n                        {t('psych.action.care')}\r\n                      </button>\r\n                      <button className=\"btn-danger btn-lg\" style={{ flex: 1 }} onClick={() => handleClassify(selectedReport._id, 'faux')}>\r\n                        {t('psych.action.fake')}\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div style={{ minWidth: '300px' }}>\r\n                    <AiAssistant reportId={selectedReport._id} description={selectedReport.incidentDescription} incidentType={selectedReport.incidentType} />\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {activeTab === 'workflow' && (\r\n                <div className=\"animate-in\">\r\n                  {selectedReport.classification !== 'sauvegarde' ? (\r\n                    <div className=\"empty-state\">\r\n                      <p>Cette proc√©dure est r√©serv√©e aux cas class√©s \"Sauvegarde\".</p>\r\n                    </div>\r\n                  ) : (\r\n                    WORKFLOW_STEPS.map((step, i) => {\r\n                      const status = selectedReport.workflow?.[step.key];\r\n                      const isDone = status?.completed;\r\n                      const isNext = !isDone && (i === 0 || selectedReport.workflow?.[WORKFLOW_STEPS[i - 1].key]?.completed);\r\n\r\n                      return (\r\n                        <div key={step.key} className={`workflow-step ${isDone ? 'completed' : ''}`} style={{ opacity: isDone || isNext ? 1 : 0.5 }}>\r\n                          <div style={{ display: 'flex', alignItems: 'center', gap: '1rem', width: '100%' }}>\r\n                            <div className={`step-number ${isDone ? 'done' : 'pending'}`}>{isDone ? '‚úì' : i + 1}</div>\r\n                            <div style={{ flex: 1 }}>\r\n                              <div style={{ fontWeight: 600 }}>{step.label}</div>\r\n                              {isDone && <span style={{ fontSize: '0.8rem', color: 'var(--text-muted)' }}>{t('psych.workflow.done')} {new Date(status.date).toLocaleDateString()}</span>}\r\n                              {isDone && status.document && (\r\n                                <div style={{ marginTop: '0.25rem' }}>\r\n                                  <a href={`/uploads/${status.document.split(/[\\\\/]/).pop()}`} target=\"_blank\" className=\"badge badge-neutral\">üìÑ Document joint</a>\r\n                                </div>\r\n                              )}\r\n                            </div>\r\n                            {isNext && (\r\n                              <div style={{ display: 'flex', gap: '0.5rem', alignItems: 'center' }}>\r\n                                <label className=\"btn-ghost btn-sm\" style={{ cursor: 'pointer', margin: 0, border: stepFile ? '2px solid var(--success)' : '1px solid var(--border)' }}>\r\n                                  {stepFile ? 'üìÑ Fichier pr√™t' : t('psych.workflow.attach')}\r\n                                  <input type=\"file\" style={{ display: 'none' }} onChange={(e) => setStepFile(e.target.files[0])} />\r\n                                </label>\r\n                                <button className=\"btn-primary btn-sm\" onClick={() => handleWorkflowStep(selectedReport._id, step.key)} disabled={!stepFile}>\r\n                                  {t('psych.workflow.validate')}\r\n                                </button>\r\n                              </div>\r\n                            )}\r\n                          </div>\r\n                        </div>\r\n                      );\r\n                    })\r\n                  )}\r\n                </div>\r\n              )}\r\n\r\n              {activeTab === 'notes' && (\r\n                <div className=\"animate-in\">\r\n                  <textarea\r\n                    value={notes}\r\n                    onChange={(e) => setNotes(e.target.value)}\r\n                    placeholder={t('psych.notes.placeholder')}\r\n                    style={{ height: '300px', padding: '1.5rem', fontFamily: 'monospace', fontSize: '0.95rem' }}\r\n                  />\r\n                  <div style={{ display: 'flex', justifyContent: 'flex-end', marginTop: '1rem' }}>\r\n                    <button className=\"btn-primary\" onClick={() => handleSaveNotes(selectedReport._id)}>\r\n                      {t('psych.notes.save')}\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n            </div>\r\n          ) : (\r\n            <div className=\"empty-state\" style={{ height: '100%', display: 'flex', flexDirection: 'column', justifyContent: 'center' }}>\r\n              <div className=\"icon\">üëà</div>\r\n              <p>{t('mother.history.empty') || \"S√©lectionnez un dossier\"}</p>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DashboardPsychologist;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}